"use strict";const MQTT_BROKER="mqtt.eclipse.org",MQTT_PORT=443;let vueOpts={el:"#app",data:{message:""},mounted(){let e=`${Date.now()}`,t=new Paho.MQTT.Client(MQTT_BROKER,443,"/mqtt",e);t.onMessageArrived=this.onMessageArrived;let n={cleanSession:!0,useSSL:!0,invocationContext:{client:t,clientId:e},onSuccess:this.onConnect};this.message="Menghubungi MQTT server...",t.connect(n)},methods:{onSubscribed(e){this.message="Subscribed!";let t=e.invocationContext;this.message="Mencari lokal server...",t.client.send("lyinfosrv/in",t.clientId)},onConnect(e){this.message="Tersambung!";let t=e.invocationContext,n=`lyinfosrv/out/${t.clientId}`,s={invocationContext:t,onSuccess:this.onSubscribed};this.message=`Mendaftar key lyinfosrv/out/${t.clientId}`,t.client.subscribe(n,s)},onMessageArrived(e){let t=`http://${JSON.parse(e.payloadString).ip}/`;this.message="Mengalihkan ke lokal server...",window.location=t}}},app=new Vue(vueOpts);
